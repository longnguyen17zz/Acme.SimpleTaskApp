<!-- Modal Update Product -->

@using Abp.Authorization.Users
@using Acme.SimpleTaskApp.Web.Models.Common.Modals
@using Acme.SimpleTaskApp.Web.Models.Products
@using System.Globalization
@model EditProductViewModel 

@{ 
   Layout = null; 
} 

@using System.Globalization
@{
    var culture = CultureInfo.CurrentUICulture.Name;
    var vndPrice = Model.Product.Price;
    const decimal VND_TO_USD = 25849m;
    var displayPrice = culture.StartsWith("en") ? (vndPrice / VND_TO_USD).ToString("N3", CultureInfo.GetCultureInfo("en-US")) : vndPrice.ToString("N2", CultureInfo.GetCultureInfo("vi-VN"));
}

@await Html.PartialAsync("~/Views/Shared/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel(L("EditProduct")))
<form name="ProductEditForm" role="form" class="form-horizontal" enctype="multipart/form-data" method="">
    <input type="hidden" name="Id" value="@Model.Product.Id" />
    <div class="modal-body">
       
        <div class="tab-content mt-4">
            <div role="tabpanel" class="tab-pane container active" id="edit-product-details">
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="name">@L("Name")</label>
                    <div class="col-md-9">
                        <input id="name" type="text" class="form-control" name="Name" value="@Model.Product.Name" required >
                    </div>
                </div>
                <div class="form-group row ">
                    <label class="col-md-3 col-form-label">@L("Description")</label>
                    <div class="col-md-9">
                        <textarea id="description" class="form-control" name="Description" rows="4" cols="50">@Model.Product.Description</textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-md-3 col-form-label" for="image">@L("Images")</label>
                    <div class="col-md-9">
                        <input id="image" type="file" class="form-control" name="Images" >
                    </div>
                </div>
                <div class="form-group row">
                    <p class="col-md-3 col-form-label" style="font-weight: 700">@L("ImageOld")</p>
                    <img src="@Model.Product.Images" style="max-height: 60px; margin-left: 10px;" alt="image" />
                </div>
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="price">@L("Price")</label>
                    <div class="col-md-9">
                        <input id="price" type="text" class="form-control" name="Price" value="@displayPrice" required>
                    </div>
                </div>
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="stockQuantity">@L("StockQuantity")</label>
                    <div class="col-md-9">
                        <input id="stockQuantity" type="text" class="form-control" name="StockQuantity" value="@Model.Product.StockQuantity" required >
                    </div>
                </div>
                <div class="form-group row required">
                    <label class="col-md-3 col-form-label" for="EditCategoryId">@L("Category")</label>
                    <div class="col-md-9">
                        <select class="form-control" asp-for="CategoryId" id="EditCategoryId" name="CategoryId" required>
                            <option value="">-- Chọn danh mục --</option>
                            @foreach (var category in Model.Categories)
                            {
                                <option value="@category.Id">
                                    @category.Name
                                </option>
                            }
                        </select>
                    </div>
                </div>


            </div>
           
        </div>
    </div>
    @await Html.PartialAsync("~/Views/Shared/Modals/_ModalFooterWithSaveAndCancel.cshtml")
</form>

<script src="~/view-resources/Views/Products/_EditModal.js" asp-append-version="true"></script>
